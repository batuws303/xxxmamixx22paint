-- GUI Referansları
local screenGui = script.Parent
local addButton = screenGui:WaitForChild("AddButton")
local removeButton = screenGui:WaitForChild("RemoveButton")
local clearButton = screenGui:WaitForChild("ClearButton")
local counterLabel = screenGui:WaitForChild("CounterLabel")
local closeButton = screenGui:WaitForChild("CloseButton")

-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Seçim tablosu
local selectedParts = {}

-- Modlar
local addMode = false
local removeMode = false

-- Boyama sayaç
local paintedCount = 0

-- Add Butonu
addButton.MouseButton1Click:Connect(function()
	addMode = not addMode
	removeMode = false

	if addMode then
		addButton.BackgroundColor3 = Color3.fromRGB(0,255,0) -- yeşil
	else
		addButton.BackgroundColor3 = Color3.fromRGB(255,0,0) -- kırmızı
	end
	removeButton.BackgroundColor3 = Color3.fromRGB(255,0,0)
end)

-- Remove Butonu
removeButton.MouseButton1Click:Connect(function()
	removeMode = not removeMode
	addMode = false

	if removeMode then
		removeButton.BackgroundColor3 = Color3.fromRGB(0,255,0) -- yeşil
	else
		removeButton.BackgroundColor3 = Color3.fromRGB(255,0,0) -- kırmızı
	end
	addButton.BackgroundColor3 = Color3.fromRGB(255,0,0)
end)

-- Clear Butonu
clearButton.MouseButton1Click:Connect(function()
	for part, highlight in pairs(selectedParts) do
		if highlight then
			highlight:Destroy()
		end
	end
	selectedParts = {}
	paintedCount = 0
	counterLabel.Text = "Painted: 0"
end)

-- X (Kapat) Butonu
closeButton.MouseButton1Click:Connect(function()
	screenGui.Enabled = false
end)

-- Mouse ile seçim/kaldırma
Mouse.Button1Down:Connect(function()
	local target = Mouse.Target
	if not target or not target:IsA("BasePart") then return end

	-- Add Mode
	if addMode and not selectedParts[target] then
		local highlight = Instance.new("SelectionBox")
		highlight.Adornee = target
		highlight.LineThickness = 0.05
		highlight.Color3 = Color3.fromRGB(255,255,255)
		highlight.Parent = target

		selectedParts[target] = highlight
		print("Seçildi:", target.Name)
	end

	-- Remove Mode
	if removeMode and selectedParts[target] then
		selectedParts[target]:Destroy()
		selectedParts[target] = nil
		print("Kaldırıldı:", target.Name)
	end
end)

-- Hızlı boyama (örnek: 1 dakikadan kısa sürede her bloğu bitiriyor)
local function fastPaint()
	local start = tick()
	for part, _ in pairs(selectedParts) do
		if part and part:IsA("BasePart") then
			part.Color = Color3.fromRGB(255, 0, 0) -- kırmızıya boya (örnek)
			paintedCount += 1
			counterLabel.Text = "Painted: " .. paintedCount
		end
		game:GetService("RunService").Heartbeat:Wait() -- FPS’e göre optimize
	end
	print("Boyama bitti, süre:", tick()-start)
end

-- Test için: GUI’ye “Paint” butonu eklersen buraya bağla
-- örn: paintButton.MouseButton1Click:Connect(fastPaint)
