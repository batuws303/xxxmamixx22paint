--// Settings
local defaultColor = Color3.fromRGB(255, 255, 255)

--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

--// Player
local player = Players.LocalPlayer
local mouse = player:GetMouse()

--// UI Setup
local UI = Instance.new("ScreenGui", player.PlayerGui)
UI.ResetOnSpawn = false

local UIHolder = Instance.new("Frame", UI)
UIHolder.AnchorPoint = Vector2.new(0.5, 0.5)
UIHolder.Position = UDim2.new(0.5, 0, 0.5, 0)
UIHolder.BackgroundTransparency = 1
UIHolder.Size = UDim2.new(0.6, 0, 0.4, 0) -- Ekran çözünürlüğüne göre ayarlandı

local mainFrame = Instance.new("Frame", UIHolder)
mainFrame.BackgroundColor3 = Color3.fromRGB(33, 33, 42)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.Size = UDim2.new(1, 0, 1, 0)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true

-- Top bar
local topBar = Instance.new("Frame", mainFrame)
topBar.BackgroundColor3 = Color3.fromRGB(49, 49, 64)
topBar.Size = UDim2.new(1, 0, 0.15, 0)

local title = Instance.new("TextLabel", topBar)
title.Text = "<b>Paint Admin Panel</b><font size='6'> PRO</font>"
title.RichText = true
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.BackgroundTransparency = 1
title.Size = UDim2.new(0.7, 0, 1, 0)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Position = UDim2.new(0.02, 0, 0, 0)

local ppsLabel = Instance.new("TextLabel", topBar)
ppsLabel.Text = "0 paint/sec"
ppsLabel.TextColor3 = Color3.fromRGB(80, 255, 123)
ppsLabel.TextScaled = true
ppsLabel.BackgroundTransparency = 1
ppsLabel.Size = UDim2.new(0.3, 0, 1, 0)
ppsLabel.TextXAlignment = Enum.TextXAlignment.Right
ppsLabel.Position = UDim2.new(0.7, 0, 0, 0)

-- Scrollable options
local scrollFrame = Instance.new("ScrollingFrame", mainFrame)
scrollFrame.Position = UDim2.new(0, 0, 0.15, 0)
scrollFrame.Size = UDim2.new(1, 0, 0.85, 0)
scrollFrame.BackgroundTransparency = 1
scrollFrame.ScrollBarThickness = 4

local layout = Instance.new("UIListLayout", scrollFrame)
layout.Padding = UDim.new(0, 10)

local padding = Instance.new("UIPadding", scrollFrame)
padding.PaddingTop = UDim.new(0, 10)
padding.PaddingLeft = UDim.new(0, 10)
padding.PaddingRight = UDim.new(0, 10)
padding.PaddingBottom = UDim.new(0, 10)

--// Variables
local color = defaultColor
local provinces = {}
local painting = true
local newpaint = false
local safeMode = false
local keepTerritoryColor = false

local provincesPerSecond = 0

--// Functions
local function createButton(name, parent, width, height)
    local btn = Instance.new("TextButton", parent)
    btn.Text = name
    btn.Size = UDim2.new(width, 0, height, 0)
    btn.BackgroundColor3 = Color3.fromRGB(241, 33, 103) -- Kapalı kırmızı
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.AutoButtonColor = false
    return btn
end

local function toggleButton(btn, state)
    if state then
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(53, 227, 153)}):Play()
    else
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(241, 33, 103)}):Play()
    end
end

-- Add, Remove, Clear, Color buttons
local addBtn = createButton("Add Province", scrollFrame, 1, 0.08)
local removeBtn = createButton("Remove Province", scrollFrame, 1, 0.08)
local clearBtn = createButton("Clear Provinces", scrollFrame, 1, 0.08)
local colorBtn = createButton("Select Color", scrollFrame, 1, 0.08)

-- Fast paint & safe mode
local fastPaintBtn = createButton("Fast Paint", scrollFrame, 1, 0.08)
local safeModeBtn = createButton("Safe Mode", scrollFrame, 1, 0.08)

--// Painting Logic
local function paintProvince(province)
    if not province then return end
    if painting then
        local targetColor = color
        if keepTerritoryColor then targetColor = province.Color end
        province.Color = targetColor
        provincesPerSecond += 1
    end
end

-- Safe mode painting: çevre -> orta
local function paintProvinceSafe(province)
    if not province then return end
    local steps = 5
    for i = 1, steps do
        province.Color = color:Lerp(province.Color, i/steps)
        RunService.RenderStepped:Wait()
    end
end

--// Connections
addBtn.MouseButton1Click:Connect(function()
    toggleButton(addBtn, true)
    painting = true
end)

removeBtn.MouseButton1Click:Connect(function()
    toggleButton(removeBtn, true)
end)

clearBtn.MouseButton1Click:Connect(function()
    for _, p in pairs(provinces) do
        p.Color = defaultColor
    end
end)

colorBtn.MouseButton1Click:Connect(function()
    local target = mouse.Target
    if target then
        color = target.Color
        toggleButton(colorBtn, true)
    end
end)

fastPaintBtn.MouseButton1Click:Connect(function()
    newpaint = not newpaint
    toggleButton(fastPaintBtn, newpaint)
end)

safeModeBtn.MouseButton1Click:Connect(function()
    safeMode = not safeMode
    toggleButton(safeModeBtn, safeMode)
end)

-- Update pps
spawn(function()
    while true do
        wait(1)
        ppsLabel.Text = provincesPerSecond.." paint/sec"
        provincesPerSecond = 0
    end
end)

-- Mouse painting
mouse.Button1Down:Connect(function()
    if mouse.Target then
        if painting then
            if safeMode then
                paintProvinceSafe(mouse.Target)
            elseif newpaint then
                -- Hızlı boyama
                paintProvince(mouse.Target)
            else
                paintProvince(mouse.Target)
            end
        end
    end
end)
